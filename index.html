<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tu Platica - Envío de Remesas</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#19223D">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    @media (min-width: 640px) {
      html, body {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }
    #installButton {
      touch-action: none; /* Enable drag on mobile */
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    /* Blue gradient styles */
    .btn-gradient {
      background: linear-gradient(to right, #003087, #1a73e8);
      color: white;
    }
    .btn-gradient:hover {
      background: linear-gradient(to right, #002b75, #1565c0);
    }
    .card-header-gradient {
      background: linear-gradient(to right, #003087, #1a73e8);
      color: white;
    }
    .blue-icon {
      color: #1a73e8;
      filter: drop-shadow(0 2px 4px rgba(26, 115, 232, 0.3));
    }
  </style>
</head>
<body class="bg-gray-100">
  <div class="w-full max-w-[400px] px-4 py-8 mx-auto">

    <!-- Main content card -->
    <div class="bg-white p-6 rounded-lg shadow-md">
      <!-- Exchange Rate Cards Section -->
      <div id="ratesCarousel" class="flex items-stretch overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide" style="scroll-snap-type: x mandatory;">
        <!-- Tarjeta Tu Platica -->
        <div class="flex-shrink-0 w-[220px] mr-4 bg-white rounded-lg shadow border border-gray-200" style="scroll-snap-align: start;">
          <div class="card-header-gradient p-3 rounded-t-lg">
            <h3 class="font-bold text-center">Tu Platica</h3>
            <p class="text-xs text-blue-100 text-center">Tasa propia</p>
          </div>
          <div class="p-4 text-center">
            <div class="flex justify-center mb-3">
              <svg class="blue-icon w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <p id="rate-tuplatica" class="text-2xl font-bold text-gray-800 mb-2">Bs 36,50</p>
            <p class="text-xs text-gray-500 mb-3" id="date-tuplatica">16/05/2025 - 7:30 PM</p>
            <button class="btn-gradient px-3 py-1 rounded-full" disabled>Oficial</button>
          </div>
        </div>
        <!-- Tarjeta Dólar BCV -->
        <div class="flex-shrink-0 w-[220px] mr-4 bg-white rounded-lg shadow border border-gray-200" style="scroll-snap-align: start;">
          <div class="card-header-gradient p-3 rounded-t-lg">
            <h3 class="font-bold text-center">Dólar BCV</h3>
            <p class="text-xs text-blue-100 text-center">BCV</p>
          </div>
          <div class="p-4 text-center">
            <div class="flex justify-center mb-3">
              <svg class="blue-icon w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <p id="rate-bcv" class="text-2xl font-bold text-gray-800 mb-2">Bs 36,25</p>
            <p class="text-xs text-gray-500 mb-3" id="date-bcv">16/05/2025 - 7:30 PM</p>
            <button class="btn-gradient px-3 py-1 rounded-full" disabled>BCV</button>
          </div>
        </div>
        <!-- Tarjeta Paralelo -->
        <div class="flex-shrink-0 w-[220px] mr-4 bg-white rounded-lg shadow border border-gray-200" style="scroll-snap-align: start;">
          <div class="card-header-gradient p-3 rounded-t-lg">
            <h3 class="font-bold text-center">Paralelo</h3>
            <p class="text-xs text-blue-100 text-center">Monitor Dólar</p>
          </div>
          <div class="p-4 text-center">
            <div class="flex justify-center mb-3">
              <svg class="blue-icon w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <p id="rate-paralelo" class="text-2xl font-bold text-gray-800 mb-2">Bs 37,10</p>
            <p class="text-xs text-gray-500 mb-3" id="date-paralelo">16/05/2025 - 7:30 PM</p>
            <button class="btn-gradient px-3 py-1 rounded-full" disabled>Paralelo</button>
          </div>
        </div>
        <!-- Tarjeta Promedio -->
        <div class="flex-shrink-0 w-[220px] bg-white rounded-lg shadow border border-gray-200" style="scroll-snap-align: start;">
          <div class="card-header-gradient p-3 rounded-t-lg">
            <h3 class="font-bold text-center">Promedio</h3>
            <p class="text-xs text-blue-100 text-center">Promedio mercado</p>
          </div>
          <div class="p-4 text-center">
            <div class="flex justify-center mb-3">
              <svg class="blue-icon w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <p id="rate-promedio" class="text-2xl font-bold text-gray-800 mb-2">Bs 36,62</p>
            <p class="text-xs text-gray-500 mb-3" id="date-promedio">16/05/2025 - 7:30 PM</p>
            <button class="btn-gradient px-3 py-1 rounded-full" disabled>Promedio</button>
          </div>
        </div>
      </div>
      </div>
      
      <!-- USD Amount Field -->
      <div class="mb-4">
        <label for="usdAmount" class="block text-sm font-medium text-gray-700 mb-1">Monto en USD</label>
        <div class="flex gap-2">
          <input id="usdAmount" type="number" step="0.01" min="0" max="200"
            class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Ej: 100">
          
          <!-- Result Display -->
          <div id="vesResult" class="flex-1 px-3 py-2 text-green-600 font-medium">
            💰 0 Bs
          </div>
        </div>
        
        <!-- Commission Display -->
        <div id="commissionResult" class="mt-2 text-blue-600 font-medium">
          💸 Total a depositar: 0.00 USD (incluye comisión)
        </div>
        
        <!-- Warning Message -->
        <div id="amountWarning" class="hidden mt-2 text-red-600 text-sm flex items-start gap-1">
          <span>⚠️</span>
          <span>El monto máximo permitido es 200 USD</span>
        </div>
      </div>

      <!-- Subida de comprobante -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1">Comprobante de pago</label>
        <input type="file" id="comprobanteInput" accept=".jpg,.jpeg,.png,.pdf" class="block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
        <p id="comprobanteFileName" class="text-xs text-gray-500 mt-1">Ningún archivo seleccionado</p>
      </div>
      <div class="mb-4">
        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-3 rounded shadow text-center font-semibold">
          Deposita vía Zelle a: <span class="font-bold">tuplatica@gmail.com</span>
        </div>
      </div>
      
      <!-- Current Rate (hidden reference) -->
      <div id="currentRate" class="hidden">36.50</div>
      
      <!-- Zelle info toggle -->
      <button id="zelleBtn" class="w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-medium py-3 px-4 rounded-full mb-4 transition duration-150 ease-in-out">
        ¿A dónde transfiero el Zelle?
      </button>

      <!-- Zelle Email Display -->
      <div class="flex items-center justify-between bg-gray-50 p-3 rounded-md mb-4">
        <p class="text-gray-700">✉️ Correo Zelle: <span class="font-medium text-blue-600">tuplatica@gmail.com</span></p>
        <button id="copyZelleBtn" class="text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded flex items-center gap-1">
          📋 Copiar
        </button>
      </div>
      
      <!-- Recipient Mobile Payment -->
      <div class="space-y-4">
        <h3 class="text-sm font-medium text-gray-700">Pago Móvil del destinatario</h3>
        
        <!-- Phone Number Row -->
        <div class="flex flex-row gap-x-3 mb-4 sm:block">
          <div class="w-[30%] sm:w-full sm:mb-4">
            <label class="block text-xs text-gray-500 mb-1 sm:text-sm sm:font-medium sm:text-gray-700">Operadora</label>
            <select id="phonePrefix" required 
              class="h-12 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
              <option value="0412">0412</option>
              <option value="0414">0414</option>
              <option value="0416">0416</option>
              <option value="0424">0424</option>
              <option value="0426">0426</option>
            </select>
          </div>
          <div class="w-[70%] sm:w-full">
            <label class="block text-xs text-gray-500 mb-1 sm:text-sm sm:font-medium sm:text-gray-700">Número</label>
            <input type="tel" id="phoneNumber" required
              class="h-12 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="7 dígitos"
              pattern="\d{7}"
              maxlength="7">
          </div>
        </div>

        <!-- ID Number Row -->
        <div class="flex flex-row gap-x-3 mb-4 sm:block">
          <div class="w-[20%] sm:w-full sm:mb-4">
            <label class="block text-xs text-gray-500 mb-1 sm:text-sm sm:font-medium sm:text-gray-700">Tipo</label>
            <select id="idType" required 
              class="h-12 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
              <option value="V">V</option>
              <option value="E">E</option>
            </select>
          </div>
          <div class="w-[80%] sm:w-full">
            <label class="block text-xs text-gray-500 mb-1 sm:text-sm sm:font-medium sm:text-gray-700">Cédula</label>
            <input type="text" id="idNumber" required
              class="h-12 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="7-8 dígitos"
              pattern="\d{7,8}"
              maxlength="8">
          </div>
        </div>

        <!-- Bank Selector -->
        <div class="mb-4">
          <label class="block text-xs text-gray-500 mb-1 sm:text-sm sm:font-medium sm:text-gray-700">Banco</label>
          <select id="bank" required 
            class="h-12 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
            <option value="" disabled selected>Seleccione un banco</option>
            <option value="banco_de_venezuela">Banco de Venezuela</option>
            <option value="banesco">Banesco</option>
            <option value="mercantil">Mercantil</option>
            <option value="provincial">Provincial</option>
            <option value="bod">BOD</option>
            <option value="100_banco">100% Banco</option>
            <option value="banco_del_tesoro">Banco del Tesoro</option>
            <option value="banco_bicentenario">Banco Bicentenario</option>
            <option value="banco_exterior">Banco Exterior</option>
            <option value="banco_caroni">Banco Caroní</option>
            <option value="banco_plaza">Banco Plaza</option>
            <option value="banco_activo">Banco Activo</option>
            <option value="bancamiga">Bancamiga</option>
            <option value="banco_sofitasa">Banco Sofitasa</option>
            <option value="banco_agricola">Banco Agrícola</option>
            <option value="otro">Otro banco</option>
          </select>
        </div>
      </div>
      
      <!-- Sender info -->
      <div>
        <label for="sender" class="block text-sm font-medium text-gray-700 mb-1">¿Quién envía?</label>
        <input type="text" id="sender" required
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Payment proof -->
      <div class="mt-4">
        <label for="paymentProof" class="block text-sm font-medium text-gray-700 mb-1">📎 Sube el comprobante de Zelle o transferencia</label>
        <input type="file" id="paymentProof" required
          class="w-full px-3 py-2 text-sm text-gray-700 border border-gray-300 rounded-md file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
          accept=".jpg,.jpeg,.png,.pdf">
        <p id="fileNameDisplay" class="text-xs text-gray-500 mt-1"></p>
      </div>

      <script>
        document.getElementById('paymentProof').addEventListener('change', function(e) {
          const fileName = e.target.files[0]?.name || 'Ningún archivo seleccionado';
          document.getElementById('fileNameDisplay').textContent = fileName;
        });
      </script>

      <!-- Additional notes -->
      <div>
        <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Notas adicionales (opcional)</label>
        <input type="text" id="notes" maxlength="100" placeholder="Máximo 100 caracteres"
          class="w-full px-2 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>
      
      <!-- WhatsApp number -->
      <div>
        <label for="whatsapp" class="block text-sm font-medium text-gray-700 mb-1">Tu número de WhatsApp</label>
        <div class="flex gap-2">
          <select id="countryCode" class="w-1/3 px-2 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="+1">🇺🇸 +1 (EE.UU.)</option>
            <option value="+58" selected>🇻🇪 +58 (Venezuela)</option>
            <option value="+57">🇨🇴 +57 (Colombia)</option>
            <option value="+51">🇵🇪 +51 (Perú)</option>
            <option value="+56">🇨🇱 +56 (Chile)</option>
          </select>
          <input type="tel" id="whatsapp" required
            class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Número sin código">
        </div>
        <p class="text-xs text-gray-500 mt-1">Ejemplo: 4121234567</p>
      </div>
      
      <!-- Frequent recipients dropdown (shown when recipients exist) -->
      <div id="recipientsDropdownContainer" class="hidden mt-6">
        <label class="block text-sm font-medium text-gray-700 mb-1">👉 Selecciona un destinatario frecuente</label>
        <select id="savedRecipients" class="w-full px-3 py-2 border border-gray-300 rounded-md">
          <option value="">-- Seleccionar --</option>
        </select>
      </div>
      
      <!-- Clear recipients button -->
      <div class="mt-4 text-center">
        <button id="clearRecipientsBtn" class="text-sm text-red-600 hover:text-red-800">
          👉 Eliminar todos los destinatarios guardados
        </button>
      </div>
      
      <!-- Submit button -->
      <button type="submit"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out">
        Enviar solicitud
      </button>
    </form>
    
    <!-- Success message (hidden by default) -->
    <div id="successMessage" class="hidden mt-4 p-4 bg-green-50 text-green-700 rounded-md text-center">
      <p>✅ Tu solicitud fue enviada con éxito. Te responderemos pronto por WhatsApp.</p>
    </div>
  </div>
  
  <script>
    // Close button functionality
    document.getElementById('closeInstallInfo').addEventListener('click', () => {
      document.getElementById('installInfoBox').style.display = 'none';
      localStorage.setItem('hideInstallInfo', 'true');
    });
    
    // Check if user previously closed the box
    if (localStorage.getItem('hideInstallInfo') === 'true') {
      document.getElementById('installInfoBox').style.display = 'none';
    }
  </script>
  
  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(registration => console.log('SW registered: ', registration))
          .catch(err => console.log('SW registration failed: ', err));
      });
    }
  </script>
</body>
</html>
